import{j as v}from"./jsx-runtime.D_zvdyIk.js";import{r as h}from"./index.6otl1p8d.js";const g=800,k=.1;class R{x;y;z;xPrev;yPrev;constructor(t=0,s=0,n=0){this.x=t,this.y=s,this.z=n,this.xPrev=t,this.yPrev=s}update(t,s,n){this.xPrev=this.x,this.yPrev=this.y,this.z+=n*.0675,this.x+=this.x*(n*.0225)*this.z,this.y+=this.y*(n*.0225)*this.z,(this.x>t/2||this.x<-t/2||this.y>s/2||this.y<-s/2)&&(this.x=Math.random()*t-t/2,this.y=Math.random()*s-s/2,this.xPrev=this.x,this.yPrev=this.y,this.z=0)}draw(t){t.lineWidth=this.z,t.beginPath(),t.moveTo(this.x,this.y),t.lineTo(this.xPrev,this.yPrev),t.stroke()}}const z=()=>{const u=h.useRef(null),t=h.useRef(null),s=h.useRef([]),n=h.useRef(0);return h.useEffect(()=>{const o=t.current,a=u.current;if(!o||!a)return;const e=o.getContext("2d");if(!e)return;s.current=Array.from({length:g},()=>new R);const m=new ResizeObserver(P);m.observe(a);function x(){const r=document.documentElement.classList.contains("dark");return{background:r?"rgba(0, 0, 0, 0.4)":"rgba(255, 255, 255, 0.4)",stroke:r?"white":"black"}}function P(){if(!e||!o||!a)return;cancelAnimationFrame(n.current);const{clientWidth:r,clientHeight:i}=a,c=window.devicePixelRatio||1;o.width=r*c,o.height=i*c,o.style.width=`${r}px`,o.style.height=`${i}px`,e.setTransform(1,0,0,1,0,0),e.scale(c,c),e.translate(r/2,i/2);const{background:f,stroke:l}=x();e.fillStyle=f,e.strokeStyle=l;for(const d of s.current)d.x=Math.random()*r-r/2,d.y=Math.random()*i-i/2,d.z=0;n.current=requestAnimationFrame(y)}function y(){if(!e||!o||!a)return;const{clientWidth:r,clientHeight:i}=a,{background:c,stroke:f}=x();e.fillStyle=c,e.strokeStyle=f,e.fillRect(-r/2,-i/2,r,i);for(const l of s.current)l.update(r,i,k),l.draw(e);n.current=requestAnimationFrame(y)}return()=>{cancelAnimationFrame(n.current),m.disconnect()}},[]),v.jsx("div",{ref:u,id:"starfield",className:"absolute inset-0 pointer-events-none",children:v.jsx("canvas",{ref:t,id:"starfield-canvas"})})};export{z as Starfield};
